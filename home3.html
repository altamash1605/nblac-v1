<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>NBLAC — Modern Lifestyle</title>
  <meta name="theme-color" content="#000000" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .no-scrollbar::-webkit-scrollbar{display:none}
    .no-scrollbar{ -ms-overflow-style:none; scrollbar-width:none }
    .sheet-enter{transform:translateX(0)}
    .sheet-leave{transform:translateX(100%)}
    .sheet-left-leave{transform:translateX(-100%)}
    .backdrop-enter{opacity:1}
    .backdrop-leave{opacity:0}
  </style>
</head>
<body class="antialiased bg-black text-white font-sans" style="font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial;">
  <!-- App Wrapper -->
  <div class="min-h-screen w-full max-w-md mx-auto relative">

    <!-- Top Nav -->
    <header class="sticky top-0 z-50 bg-black/80 backdrop-blur supports-[backdrop-filter]:backdrop-blur border-b border-white/10">
      <div class="px-4 pt-[env(safe-area-inset-top)]"></div>
      <div class="px-4 py-3 flex items-center justify-between">
        <button id="menuButton" aria-controls="mobileMenu" aria-expanded="false" aria-label="Open menu" class="h-10 w-10 flex items-center justify-center border border-white/15 hover:border-white/30 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30">
          <i data-lucide="grip-vertical" class="h-5 w-5"></i>
        </button>
        <div class="select-none tracking-tight text-xl font-semibold">
          <span class="inline-block">NBLAC</span>
        </div>
        <div class="flex items-center gap-2">
          <button id="searchButton" aria-label="Search ( / )" class="h-10 w-10 flex items-center justify-center border border-white/15 hover:border-white/30 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30">
            <i data-lucide="search" class="h-5 w-5"></i>
          </button>
          <button id="cartButton" aria-label="Cart" class="relative h-10 w-10 flex items-center justify-center border border-white/15 hover:border-white/30 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30">
            <i data-lucide="bag" class="h-5 w-5"></i>
            <span id="cartCount" class="absolute -top-1.5 -right-1.5 text-[10px] leading-none px-1.5 py-0.5 bg-white text-black border border-black/10 rounded" style="font-weight: 600; display: none;">0</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <section class="px-4 pt-4">
      <div class="relative aspect-[4/5] w-full border border-white/10 overflow-hidden">
        <img alt="Monochrome lifestyle hero" class="absolute inset-0 h-full w-full object-cover contrast-125" src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&auto=format&fit=crop&w=1200&grayscale"/>
        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 right-0 p-4">
          <div class="flex items-center gap-2 text-[11px] uppercase tracking-wide">
            <span class="px-2 py-1 border border-white/20 bg-black/40">New Drop</span>
            <div class="h-px flex-1 bg-white/15"></div>
          </div>
          <h1 class="mt-3 text-3xl tracking-tight leading-[1.1] font-semibold">
            Objects for the modern day.
          </h1>
          <p class="mt-2 text-sm text-white/80">
            Essential pieces in black and white—quiet confidence, everyday ready.
          </p>
          <div class="mt-3 flex items-center gap-2">
            <a href="#grid" class="px-4 h-10 border border-white/20 bg-white text-black hover:bg-white/90 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30 inline-flex items-center justify-center" style="font-weight: 500;">
              Shop now
            </a>
            <button class="px-4 h-10 border border-white/20 hover:border-white/40 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30" style="font-weight: 500;">
              Lookbook
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Category Filter -->
    <section class="px-4 pt-5">
      <div class="flex items-center justify-between">
        <h2 class="text-lg tracking-tight font-semibold">Catalog</h2>
        <button id="filterMenu" class="h-10 px-3 border border-white/15 hover:border-white/30 transition-colors flex items-center gap-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30">
          <i data-lucide="sliders-horizontal" class="h-4 w-4"></i>
          <span class="text-sm">Filters</span>
        </button>
      </div>
      <div class="mt-3 flex gap-2 overflow-x-auto no-scrollbar" style="scrollbar-width: none;">
        <button data-filter="all" class="px-3 h-9 border border-white/40 bg-white text-black whitespace-nowrap hover:bg-white/90 transition-colors" style="font-weight: 500;">All</button>
        <button data-filter="wallets" class="px-3 h-9 border border-white/15 hover:border-white/30 whitespace-nowrap transition-colors">Wallets</button>
        <button data-filter="watches" class="px-3 h-9 border border-white/15 hover:border-white/30 whitespace-nowrap transition-colors">Watches</button>
        <button data-filter="hoodies" class="px-3 h-9 border border-white/15 hover:border-white/30 whitespace-nowrap transition-colors">Hoodies</button>
        <button data-filter="caps" class="px-3 h-9 border border-white/15 hover:border-white/30 whitespace-nowrap transition-colors">Caps</button>
        <button data-filter="notebooks" class="px-3 h-9 border border-white/15 hover:border-white/30 whitespace-nowrap transition-colors">Notebooks</button>
      </div>
    </section>

    <!-- Product Grid -->
    <main class="px-4 pt-4 pb-24">
      <div id="grid" class="grid grid-cols-2 gap-3">
        <!-- Wallets -->
        <article data-category="wallets" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1593030668930-3d4d5f0e9a61?q=80&auto=format&fit=crop&w=800&grayscale" alt="Bifold Wallet" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
            <div class="absolute top-2 left-2 px-2 py-1 text-[11px] uppercase bg-black/60 border border-white/15">Classic</div>
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Bifold Wallet</h3>
                <p class="text-xs text-white/70">Full-grain leather</p>
              </div>
              <button data-add data-name="Bifold Wallet" data-price="85" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$85</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="heart" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <article data-category="wallets" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1549558549-415fe4c37b60?q=80&auto=format&fit=crop&w=800&grayscale" alt="Slim Card Holder" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Slim Card Holder</h3>
                <p class="text-xs text-white/70">Minimal silhouette</p>
              </div>
              <button data-add data-name="Slim Card Holder" data-price="55" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$55</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="bookmark" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <!-- Watches -->
        <article data-category="watches" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&auto=format&fit=crop&w=800&grayscale" alt="Steel Chrono" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
            <div class="absolute top-2 left-2 px-2 py-1 text-[11px] uppercase bg-black/60 border border-white/15">Limited</div>
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Steel Chrono</h3>
                <p class="text-xs text-white/70">Sapphire glass</p>
              </div>
              <button data-add data-name="Steel Chrono" data-price="290" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$290</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="heart" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <article data-category="watches" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1524592094714-0f0654e20314?q=80&auto=format&fit=crop&w=800&grayscale" alt="Mono Watch" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Mono Watch</h3>
                <p class="text-xs text-white/70">Matte stainless</p>
              </div>
              <button data-add data-name="Mono Watch" data-price="210" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$210</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="bookmark" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <!-- Hoodies -->
        <article data-category="hoodies" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1635151227785-429f420c6b9d?q=80&auto=format&fit=crop&w=800&grayscale" alt="Core Hoodie" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Core Hoodie</h3>
                <p class="text-xs text-white/70">Heavyweight fleece</p>
              </div>
              <button data-add data-name="Core Hoodie" data-price="95" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$95</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="heart" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <article data-category="hoodies" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&auto=format&fit=crop&w=800&grayscale" alt="Zip Hoodie" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Zip Hoodie</h3>
                <p class="text-xs text-white/70">Double knit</p>
              </div>
              <button data-add data-name="Zip Hoodie" data-price="105" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$105</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="bookmark" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <!-- Caps -->
        <article data-category="caps" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1523205565295-f8e91625464b?q=80&auto=format&fit=crop&w=800&grayscale" alt="Mono Cap" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Mono Cap</h3>
                <p class="text-xs text-white/70">Structured crown</p>
              </div>
              <button data-add data-name="Mono Cap" data-price="45" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$45</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="heart" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <article data-category="caps" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1519680772-8b38f7e57a10?q=80&auto=format&fit=crop&w=800&grayscale" alt="6-Panel Cap" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">6-Panel Cap</h3>
                <p class="text-xs text-white/70">Matte black</p>
              </div>
              <button data-add data-name="6-Panel Cap" data-price="42" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$42</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="bookmark" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <!-- Notebooks -->
        <article data-category="notebooks" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&auto=format&fit=crop&w=800&grayscale" alt="Hardcover Notebook" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Hardcover Notebook</h3>
                <p class="text-xs text-white/70">Dot grid</p>
              </div>
              <button data-add data-name="Hardcover Notebook" data-price="28" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$28</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="heart" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>

        <article data-category="notebooks" class="group border border-white/10 bg-black overflow-hidden">
          <div class="relative aspect-square overflow-hidden">
            <img src="https://images.unsplash.com/photo-1552519507-da3b142c6e3d?q=80&auto=format&fit=crop&w=800&grayscale" alt="Softcover Notebook" class="h-full w-full object-cover group-hover:contrast-125 transition-all">
          </div>
          <div class="p-3">
            <div class="flex items-start justify-between gap-2">
              <div>
                <h3 class="text-[15px] tracking-tight font-medium">Softcover Notebook</h3>
                <p class="text-xs text-white/70">Lay-flat binding</p>
              </div>
              <button data-add data-name="Softcover Notebook" data-price="22" class="h-9 w-9 flex items-center justify-center border border-white/20 hover:border-white/40 transition-colors" aria-label="Add to cart">
                <i data-lucide="plus" class="h-4 w-4"></i>
              </button>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm">$22</span>
              <button aria-label="Save" class="h-9 w-9 flex items-center justify-center border border-white/10 hover:border-white/30 transition-colors">
                <i data-lucide="bookmark" class="h-4 w-4"></i>
              </button>
            </div>
          </div>
        </article>
      </div>
    </main>

    <!-- Footer / Bottom Bar -->
    <footer class="fixed bottom-0 left-0 right-0 border-t border-white/10 bg-black/90 backdrop-blur supports-[backdrop-filter]:backdrop-blur">
      <div class="max-w-md mx-auto px-4 py-3 flex items-center justify-between">
        <button class="flex-1 h-11 border border-white/15 hover:border-white/30 transition-colors flex items-center justify-center gap-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/30">
          <i data-lucide="home" class="h-5 w-5"></i>
          <span class="text-sm">Home</span>
        </button>
        <div class="w-2"></div>
        <button class="flex-1 h-11 border border-white/15 hover:border-white/30 transition-colors flex items-center justify-center gap-2">
          <i data-lucide="grid-2x2" class="h-5 w-5"></i>
          <span class="text-sm">Shop</span>
        </button>
        <div class="w-2"></div>
        <button class="flex-1 h-11 border border-white/15 hover:border-white/30 transition-colors flex items-center justify-center gap-2">
          <i data-lucide="user" class="h-5 w-5"></i>
          <span class="text-sm">Account</span>
        </button>
      </div>
    </footer>
  </div>

  <!-- Overlays / Drawers -->
  <!-- Backdrop -->
  <div id="backdrop" class="fixed inset-0 bg-black/60 opacity-0 pointer-events-none transition-opacity duration-200"></div>

  <!-- Mobile Menu (left sheet) -->
  <aside id="mobileMenu" class="fixed top-0 left-0 h-full w-[85vw] max-w-xs bg-black border-r border-white/10 translate-x-[-100%] transition-transform duration-200 z-[60]">
    <div class="p-4 flex items-center justify-between border-b border-white/10">
      <span class="text-lg font-semibold">Menu</span>
      <button data-close="mobileMenu" class="h-9 w-9 border border-white/15 hover:border-white/30 grid place-items-center"><i data-lucide="x"></i></button>
    </div>
    <nav class="p-2">
      <a href="#" class="flex items-center justify-between px-3 py-3 border-b border-white/10 hover:bg-white/5">
        <span>New Arrivals</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
      <a href="#" class="flex items-center justify-between px-3 py-3 border-b border-white/10 hover:bg-white/5">
        <span>Best Sellers</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
      <a href="#" class="flex items-center justify-between px-3 py-3 border-b border-white/10 hover:bg-white/5">
        <span>Apparel</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
      <a href="#" class="flex items-center justify-between px-3 py-3 border-b border-white/10 hover:bg-white/5">
        <span>Accessories</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
      <a href="#" class="flex items-center justify-between px-3 py-3 border-b border-white/10 hover:bg-white/5">
        <span>Journal</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
      <a href="#" class="flex items-center justify-between px-3 py-3 hover:bg-white/5">
        <span>Support</span><i data-lucide="arrow-right" class="w-4 h-4"></i>
      </a>
    </nav>
    <div class="p-4 text-xs text-white/60 border-t border-white/10">
      Curated in black. Built for less noise, more living.
    </div>
  </aside>

  <!-- Search Command Bar -->
  <div id="searchModal" class="fixed inset-x-0 top-0 z-[70] translate-y-[-100%] transition-transform duration-200">
    <div class="max-w-md mx-auto bg-black border-b border-white/10">
      <div class="px-4 pt-[env(safe-area-inset-top)]"></div>
      <div class="px-4 py-3 flex items-center gap-2">
        <i data-lucide="search" class="h-5 w-5"></i>
        <input id="searchInput" type="text" placeholder="Search products, categories…" class="w-full bg-transparent outline-none placeholder-white/50" />
        <button data-close="search" class="h-9 w-9 border border-white/15 hover:border-white/30 grid place-items-center"><i data-lucide="x"></i></button>
      </div>
      <div id="searchResults" class="max-h-72 overflow-auto border-t border-white/10 hidden"></div>
    </div>
  </div>

  <!-- Cart Drawer (right sheet) -->
  <aside id="cartDrawer" class="fixed top-0 right-0 h-full w-[90vw] max-w-sm bg-black border-l border-white/10 translate-x-full transition-transform duration-200 z-[80]">
    <div class="p-4 flex items-center justify-between border-b border-white/10">
      <span class="text-lg font-semibold">Your Cart</span>
      <button data-close="cartDrawer" class="h-9 w-9 border border-white/15 hover:border-white/30 grid place-items-center"><i data-lucide="x"></i></button>
    </div>
    <div id="cartItems" class="divide-y divide-white/10 max-h-[60vh] overflow-auto"></div>
    <div class="p-4 space-y-3 border-t border-white/10">
      <div class="flex items-center justify-between text-sm">
        <span>Subtotal</span>
        <strong id="cartSubtotal">$0</strong>
      </div>
      <button class="w-full h-11 border border-white/20 bg-white text-black hover:bg-white/90 transition-colors font-medium">Checkout</button>
      <p class="text-xs text-white/60">Free shipping on orders over $100. Easy 30-day returns.</p>
    </div>
  </aside>

  <!-- Scripts -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    // Init icons
    lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });

    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    // Backdrop helpers
    const backdrop = $('#backdrop');
    const openBackdrop = () => { backdrop.classList.remove('pointer-events-none'); backdrop.classList.add('backdrop-enter'); backdrop.classList.remove('backdrop-leave'); requestAnimationFrame(()=> backdrop.style.opacity = '1'); backdrop.classList.add('opacity-100'); backdrop.classList.remove('opacity-0'); backdrop.style.opacity='1'; }
    const closeBackdrop = () => { backdrop.classList.add('pointer-events-none'); backdrop.classList.remove('backdrop-enter'); backdrop.classList.add('backdrop-leave'); backdrop.style.opacity='0'; }

    // Generic sheet toggler
    function openSheet(el, side='right'){
      openBackdrop();
      el.style.transform = 'translateX(0)';
      document.body.style.overflow = 'hidden';
      el.setAttribute('aria-hidden','false');
    }
    function closeSheet(el, side='right'){
      if(side==='right'){ el.style.transform = 'translateX(100%)'; } else { el.style.transform = 'translateX(-100%)'; }
      document.body.style.overflow = '';
      el.setAttribute('aria-hidden','true');
      closeBackdrop();
    }

    // MENU
    const menuButton = $('#menuButton');
    const mobileMenu = $('#mobileMenu');
    menuButton.addEventListener('click', () => {
      openSheet(mobileMenu, 'left');
      mobileMenu.style.transform = 'translateX(0)';
      backdrop.onclick = () => closeSheet(mobileMenu, 'left');
    });
    $$('[data-close="mobileMenu"]').forEach(b=> b.addEventListener('click', ()=> closeSheet(mobileMenu, 'left')));

    // SEARCH (button + '/' shortcut)
    const searchButton = $('#searchButton');
    const searchModal = $('#searchModal');
    const searchInput = $('#searchInput');
    const searchResults = $('#searchResults');

    function openSearch(){
      openBackdrop();
      searchModal.style.transform = 'translateY(0)';
      searchInput.value = '';
      renderSearchResults('');
      setTimeout(()=> searchInput.focus(), 50);
      backdrop.onclick = closeSearch;
    }
    function closeSearch(){
      searchModal.style.transform = 'translateY(-100%)';
      closeBackdrop();
    }
    searchButton.addEventListener('click', openSearch);
    document.addEventListener('keydown', (e)=>{
      if(e.key === '/' && !e.metaKey && !e.ctrlKey && !e.altKey){
        e.preventDefault();
        openSearch();
      }
      if(e.key === 'Escape'){
        closeSearch();
        closeSheet(cartDrawer);
        closeSheet(mobileMenu,'left');
      }
    });
    $$('[data-close="search"]').forEach(b=> b.addEventListener('click', closeSearch));

    // Simple search across product cards (name + category)
    const productCards = $$('#grid [data-category]');
    function renderSearchResults(q){
      const query = q.trim().toLowerCase();
      const matches = productCards.filter(card=>{
        const name = card.querySelector('h3')?.textContent.toLowerCase() || '';
        const cat = card.getAttribute('data-category') || '';
        return !query || name.includes(query) || cat.includes(query);
      });
      if(!query){
        searchResults.classList.add('hidden');
        return;
      }
      searchResults.classList.remove('hidden');
      searchResults.innerHTML = matches.slice(0,8).map(card=>{
        const name = card.querySelector('h3')?.textContent || '';
        const cat = card.getAttribute('data-category');
        const price = card.querySelector('.text-sm')?.textContent || '';
        const img = card.querySelector('img')?.getAttribute('src') || '';
        return `
          <button data-jump="${name}" class="w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-white/5">
            <img src="${img}" alt="" class="w-10 h-10 object-cover border border-white/10" />
            <div class="min-w-0">
              <div class="text-sm font-medium truncate">${name}</div>
              <div class="text-xs text-white/60">${cat} • ${price}</div>
            </div>
            <i data-lucide="arrow-up-right" class="ml-auto w-4 h-4"></i>
          </button>
        `;
      }).join('') || `<div class="px-4 py-3 text-sm text-white/60">No results. Try “hoodie”, “wallets”, “watch”…</div>`;
      lucide.createIcons();
      // jump to product
      $$('[data-jump]').forEach(b=>{
        b.addEventListener('click', ()=>{
          const name = b.getAttribute('data-jump');
          const target = productCards.find(c=> c.querySelector('h3')?.textContent === name);
          if(target){
            closeSearch();
            target.scrollIntoView({behavior:'smooth', block:'center'});
            target.classList.add('ring-1','ring-white/30');
            setTimeout(()=> target.classList.remove('ring-1','ring-white/30'), 1200);
          }
        });
      });
    }
    searchInput.addEventListener('input', e=> renderSearchResults(e.target.value));

    // Category filtering
    const filterButtons = document.querySelectorAll('[data-filter]');
    const cards = document.querySelectorAll('[data-category]');
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const target = btn.getAttribute('data-filter');
        filterButtons.forEach(b => {
          b.classList.remove('border-white/40','bg-white','text-black');
          b.classList.add('border-white/15');
        });
        btn.classList.remove('border-white/15');
        btn.classList.add('border-white/40','bg-white','text-black');
        cards.forEach(card => {
          const cat = card.getAttribute('data-category');
          const show = target === 'all' || target === cat;
          card.style.display = show ? '' : 'none';
        });
      });
    });

    // CART
    const cartDrawer = $('#cartDrawer');
    const cartCountEl = $('#cartCount');
    const cartItemsEl = $('#cartItems');
    const cartSubtotalEl = $('#cartSubtotal');
    let cart = [];

    function openCart(){
      openSheet(cartDrawer, 'right');
      cartDrawer.style.transform = 'translateX(0)';
      backdrop.onclick = () => closeSheet(cartDrawer,'right');
      renderCart();
    }
    function updateCartBadge(){
      const count = cart.reduce((a,i)=> a+i.qty, 0);
      if(count > 0){
        cartCountEl.textContent = count;
        cartCountEl.style.display = 'inline-block';
      } else {
        cartCountEl.style.display = 'none';
      }
    }
    function renderCart(){
      if(cart.length === 0){
        cartItemsEl.innerHTML = `<div class="p-4 text-sm text-white/70">Your cart is empty. Start with our best-sellers.</div>`;
      } else {
        cartItemsEl.innerHTML = cart.map((item, idx)=> `
          <div class="flex items-center gap-3 p-3">
            <div class="w-14 h-14 bg-white/5 border border-white/10 grid place-items-center">
              <i data-lucide="package" class="w-4 h-4"></i>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">${item.name}</div>
              <div class="text-xs text-white/60">$${item.price} • ${item.category}</div>
              <div class="mt-1 inline-flex items-center gap-2">
                <button class="w-7 h-7 border border-white/15 hover:border-white/30" data-dec="${idx}" aria-label="Decrease">−</button>
                <span class="text-sm w-6 text-center">${item.qty}</span>
                <button class="w-7 h-7 border border-white/15 hover:border-white/30" data-inc="${idx}" aria-label="Increase">+</button>
                <button class="ml-3 text-xs underline text-white/60 hover:text-white" data-remove="${idx}">Remove</button>
              </div>
            </div>
            <div class="text-sm font-medium">$${(item.price*item.qty).toFixed(2)}</div>
          </div>
        `).join('');
      }
      const subtotal = cart.reduce((a,i)=> a + i.price*i.qty, 0);
      cartSubtotalEl.textContent = `$${subtotal.toFixed(2)}`;
      lucide.createIcons();

      // qty handlers
      $$('[data-inc]').forEach(b=> b.addEventListener('click', ()=>{
        const i = +b.getAttribute('data-inc'); cart[i].qty++; renderCart(); updateCartBadge();
      }));
      $$('[data-dec]').forEach(b=> b.addEventListener('click', ()=>{
        const i = +b.getAttribute('data-dec'); cart[i].qty = Math.max(1, cart[i].qty-1); renderCart(); updateCartBadge();
      }));
      $$('[data-remove]').forEach(b=> b.addEventListener('click', ()=>{
        const i = +b.getAttribute('data-remove'); cart.splice(i,1); renderCart(); updateCartBadge();
      }));
    }

    $('#cartButton').addEventListener('click', openCart);
    $$('[data-close="cartDrawer"]').forEach(b=> b.addEventListener('click', ()=> closeSheet(cartDrawer,'right')));

    // Add to cart buttons
    $$('#grid [data-add]').forEach(btn => {
      btn.addEventListener('click', () => {
        const name = btn.getAttribute('data-name');
        const price = parseFloat(btn.getAttribute('data-price'));
        const card = btn.closest('[data-category]');
        const category = card?.getAttribute('data-category') || 'item';
        const existing = cart.find(i=> i.name===name);
        if(existing){ existing.qty++; } else { cart.push({ name, price, qty:1, category }); }
        updateCartBadge();

        // Visual feedback
        btn.classList.add('border-white/60');
        setTimeout(() => btn.classList.remove('border-white/60'), 200);
      });
    });

    // Close via backdrop click default (set dynamically per sheet)
    backdrop.addEventListener('click', ()=> {
      closeSheet(cartDrawer,'right');
      closeSheet(mobileMenu,'left');
      closeSearch();
    });
  </script>
</body>
</html>
