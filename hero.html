<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NBLAC — Grid Flip Hero (Dual-Side Heading)</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { ink: {950:"#0b0b0b"} , sub:"#b5b5b5" },
          boxShadow: { soft: "0 10px 30px rgba(0,0,0,.35)" }
        }
      }
    }
  </script>
  <style>
    .flip-scene { perspective: 900px; }
    .flip-card { transform-style: preserve-3d; transition: transform 800ms cubic-bezier(.2,.7,.2,1); }
    .flip-card.flipped { transform: rotateY(180deg); }
    .flip-face { backface-visibility: hidden; }
    .flip-back { transform: rotateY(180deg); }

    /* “Glass” faces: show heading behind by staying translucent on both sides */
    .glass-face {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(1px);
    }

    /* Image layer transitions */
    .img-layer { transition: opacity 400ms ease; }
    .reveal-heading .img-layer { opacity: 0 !important; } /* global reveal state */

    @media (prefers-reduced-motion: reduce) {
      .flip-card { transition: none !important; }
      .img-layer { transition: none !important; }
    }
  </style>
</head>
<body class="bg-ink-950 text-white">
  <section class="relative min-h-[90svh] grid place-items-center overflow-hidden">
    <!-- Big heading behind the grid, visible through both faces -->
    <div aria-hidden="true" class="absolute inset-0 grid place-items-center pointer-events-none select-none">
      <h1 class="text-center font-semibold leading-tight tracking-tight" style="text-wrap:balance;">
        <span class="block text-3xl sm:text-5xl md:text-7xl lg:text-8xl opacity-[0.09]">NBLAC</span>
        <span class="block text-lg sm:text-2xl md:text-4xl lg:text-5xl opacity-[0.10] mt-2">Essentials in Black</span>
      </h1>
    </div>

    <!-- Grid -->
    <div id="grid"
         class="relative z-10 w-full max-w-6xl
                grid grid-cols-3 [grid-auto-rows:1fr] gap-2 p-3
                sm:gap-3 sm:p-6
                md:grid-cols-6 md:gap-3 lg:max-w-7xl">
    </div>

    <p class="absolute bottom-4 left-0 right-0 text-center text-xs text-sub">
      Random flips keep motion alive; periodic sync hides images so the heading shows through every tile.
    </p>

    <div class="absolute top-4 right-4 flex gap-2">
      <button id="toggleMotion"
              class="text-xs px-3 py-1.5 rounded-full border border-white/15 hover:border-white/30 bg-white/5 backdrop-blur">
        Pause motion
      </button>
      <button id="forceReveal"
              class="text-xs px-3 py-1.5 rounded-full border border-white/15 hover:border-white/30 bg-white/5 backdrop-blur">
        Reveal heading now
      </button>
    </div>
  </section>

  <script>
    // ---------- CONFIG ----------
    const images = [
      { src: "https://images.unsplash.com/photo-1511385348-a52b4a160dc2?q=80&w=800&auto=format&fit=crop", alt: "Wallet" },
      { src: "https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=800&auto=format&fit=crop", alt: "Watch" },
      { src: "https://images.unsplash.com/photo-1520975682031-cd2752abed26?q=80&w=800&auto=format&fit=crop", alt: "Hoodie" },
      { src: "https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=800&auto=format&fit=crop", alt: "T-Shirt" },
      { src: "https://images.unsplash.com/photo-1520975661595-6453be3f7070?q=80&w=800&auto=format&fit=crop", alt: "Cap" },
      { src: "https://images.unsplash.com/photo-1504384308090-c894fdcc538d?q=80&w=800&auto=format&fit=crop", alt: "Notebook" },
      { src: "https://images.unsplash.com/photo-1516542076529-1ea3854896e1?q=80&w=800&auto=format&fit=crop", alt: "Pen" },
      { src: "https://images.unsplash.com/photo-1512496015851-a90fb38ba796?q=80&w=800&auto=format&fit=crop", alt: "Backpack" },
      { src: "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=800&auto=format&fit=crop", alt: "Sunglasses" },
      { src: "https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=800&auto=format&fit=crop", alt: "Tech Accessory" },
    ];

    const mobileCols = 3, mobileRows = 5;       // 15 tiles on phones
    const desktopCols = 6, desktopRows = 5;     // 30 tiles on md+

    const MIN_DELAY = 1500;
    const MAX_DELAY = 5000;
    const FLIP_DURATION = 900;
    const SYNC_EVERY_MS = 12000;
    const SYNC_SHOW_MS  = 1600;  // how long to keep heading revealed

    const grid = document.getElementById("grid");

    function targetTileCount() {
      return window.matchMedia("(min-width: 768px)").matches
        ? desktopCols * desktopRows
        : mobileCols * mobileRows;
    }

    function createTile(i) {
      const scene = document.createElement("div");
      scene.className = "flip-scene aspect-square";

      const card = document.createElement("div");
      card.className = "flip-card relative w-full h-full rounded-lg overflow-hidden shadow-soft";

      // Shared image layer (will be hidden during reveal)
      const imgLayer = document.createElement("img");
      const chosen = images[i % images.length];
      imgLayer.src = chosen.src;
      imgLayer.alt = chosen.alt;
      imgLayer.className = "img-layer absolute inset-0 w-full h-full object-cover";

      // FRONT glass (heading will be seen through)
      const front = document.createElement("div");
      front.className = "flip-face glass-face absolute inset-0";

      // BACK glass (also lets heading through)
      const back = document.createElement("div");
      back.className  = "flip-face flip-back glass-face absolute inset-0";

      // Optional subtle grid border so tiles are visible during reveal
      const border = document.createElement("div");
      border.className = "absolute inset-0 rounded-lg border border-white/10 pointer-events-none";

      card.appendChild(imgLayer);
      card.appendChild(front);
      card.appendChild(back);
      card.appendChild(border);
      scene.appendChild(card);

      scene._card = card;
      scene._imgLayer = imgLayer;
      scene._busy = false;
      return scene;
    }

    function buildGrid() {
      grid.innerHTML = "";
      const count = targetTileCount();
      for (let i = 0; i < count; i++) grid.appendChild(createTile(i));
    }

    buildGrid();
    window.addEventListener("resize", () => {
      const prev = grid.children.length, next = targetTileCount();
      if (prev !== next) buildGrid();
    });

    function flip(tile, forceState=null) {
      if (!tile?._card || tile._busy) return;
      tile._busy = true;
      const c = tile._card;
      if (forceState === true) c.classList.add("flipped");
      else if (forceState === false) c.classList.remove("flipped");
      else c.classList.toggle("flipped");
      setTimeout(() => tile._busy = false, FLIP_DURATION);
    }

    const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    function scheduleRandomFlip(tile) {
      const go = () => {
        const isFlipped = tile._card.classList.contains("flipped");
        flip(tile, Math.random() < 0.5 ? !isFlipped : null);
        setTimeout(go, rand(MIN_DELAY, MAX_DELAY));
      };
      setTimeout(go, rand(MIN_DELAY, MAX_DELAY));
    }

    // Start random flips
    [...grid.children].forEach(scheduleRandomFlip);

    // Sync reveal: hide images everywhere for a moment so heading shows on BOTH faces
    function revealHeadingOnce() {
      document.body.classList.add("reveal-heading");
      setTimeout(() => {
        document.body.classList.remove("reveal-heading");
      }, SYNC_SHOW_MS);
    }

    // Periodic sync
    const syncTimer = setInterval(() => {
      // Optionally align all faces first for a crisp reveal:
      [...grid.children].forEach(t => flip(t, true)); // all to back (glass)
      revealHeadingOnce();
    }, SYNC_EVERY_MS);

    // Controls
    const toggleBtn = document.getElementById("toggleMotion");
    const forceBtn  = document.getElementById("forceReveal");
    let paused = false;

    function setPaused(state) {
      paused = state;
      document.querySelectorAll(".flip-card").forEach(card => {
        card.style.transitionDuration = paused ? "0ms" : "800ms";
      });
      toggleBtn.textContent = paused ? "Resume motion" : "Pause motion";
    }
    toggleBtn.addEventListener("click", () => setPaused(!paused));
    forceBtn.addEventListener("click", revealHeadingOnce);

    if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) setPaused(true);
  </script>
</body>
</html>
